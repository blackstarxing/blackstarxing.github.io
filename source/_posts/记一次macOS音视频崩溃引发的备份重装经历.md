---
title: 记一次macOS音视频崩溃引发的备份重装经历
date: 2019-01-22 22:04:05
urlname: reset-recover-mac
cover: "https://s2.ax1x.com/2019/01/26/knt2y4.jpg"
categories: ["数码"]
tags: ["MAC"]
toc: true
---

### 音视频崩溃

事情要从几天前说起。

一个周末的晚上，电脑右上角忽然频繁跳出网易云音乐播放失败的通知，接着网页上的视频也无法播放，刷新了几次网页依然不行，我以为是网络问题就去睡了。可第二天早上起来准备看我牛的比赛时，依然无法播放，家里的网络也没问题，看比赛要紧，重启试试吧，嘿，果然好了。

可是到了晚上这个情况又一次出现了，去网上搜了一下，有人说这是macOS的核心音频守护进程出了问题，只需在终端中执行`sudo killall coreaudiod`或者在活动监视器中退出`coreaudiod`进程：

![coreaudiod](https://s2.ax1x.com/2019/01/22/kApsfI.jpg)

果然音视频马上又可以正常播放了。然而这个我认为是偶现的问题在此后几天频频出现，特别是使用Mac系统特别受欢迎的开源播放器IINA播放电影更是2分钟内必崩溃。虽然重启`coreaudiod`进程可以快速解决，但总归不能根治问题。上网自行查阅以及咨询APPLE技术支持后我分别尝试了卸载问题出现前最新安装过的软件、[重置NVRAM](https://support.apple.com/zh-cn/HT204063)、[安全模式启动](https://support.apple.com/zh-cn/guide/mac-help/mh21245/mac)、切换管理员、重装系统，可是问题还是依旧存在。

抱着电脑去了离家最近的乐堤港APPLE授权店检测表明硬件是没有问题的，看起来只剩下抹盘重装一种方式了，如果你并没有遇到过上述问题，但是刚好有需要对电脑进行备份和抹盘重装那么你也可以接着读下去。

### 备份

Mac提供了一个很方便的备份工具——**时间机器**（Time Machine），在此之前你需要一个移动硬盘或其他外接存储设备，连接电脑会跳出一个这样的弹窗：

![chooseDisk](https://s2.ax1x.com/2019/01/24/ke4We1.png)

点击**用作备份磁盘**，然后进入时间机器偏好设置，选中磁盘后你会看到这样的界面：

![machine set](https://s2.ax1x.com/2019/01/24/ke4fdx.png)

如果勾选了**自动备份**会在未来的某个时刻开始备份，这里我们不等了，直接备份。勾选**在菜单栏中显示时间机器**，点击状态栏上的时间机器图标**立即备份**：

![backupnow](https://s2.ax1x.com/2019/01/25/keIpAx.png)



如果你是首次进行备份，那么这个过程会持续比较长的时间，但是不影响电脑的正常使用。

备份完成后，关机，接下来我们需要用到macOS的恢复功能。

### 利用恢复功能重装系统

一共有三种方式进入恢复功能，首先关机状态下按下开机键然后立刻按住`Command (⌘)-R`、`Option-⌘-R`或`Shift-Option-⌘-R`组合键，注意动作一定要快，这三种方式的不同在于所安装的macOS版本，通常我们用`Command (⌘)-R`就行了，当看到旋转的地球或者苹果标志的时候就可以松手了，片刻后屏幕上会出现下面这个页面，先点击磁盘工具抹掉磁盘（`再次提醒一定要先进行备份！！！`）。

![mac_recovery](https://s2.ax1x.com/2019/01/25/keIbVI.jpg)

磁盘清空后再返回点击**重新安装macOS**，需要再点击几次同意、继续之类的按钮后系统就会自动下载安装了，这一步除了耗时较长，操作非常简单。

### 恢复备份

重装好系统后，你的电脑就像刚到手一样干干净净的了，我们根据需要恢复之前的备份。恢复备份主要也有三种方式：

#### 1、进入时间机器恢复备份

点击时间机器状态图标进入时间机器，你会看到过往备份版本的文件夹时间轴，点选想要恢复的版本下的文件夹或文件然后恢复就可以了，这种方式的优点是可是任意选择文件进行恢复。

![timemachine_line](https://s2.ax1x.com/2019/01/26/knuMlt.jpg)

#### 2、迁移助理

点开访达，菜单栏点击**前往**-->**实用工具**。

![finder](https://s2.ax1x.com/2019/01/26/knu7Ae.png)

![assist](https://s2.ax1x.com/2019/01/26/knuo7D.png)

点开**迁移助理**，然后按照顺序一步一步操作：

![assist](https://s2.ax1x.com/2019/01/26/knu5nK.jpg)

![assist](https://s2.ax1x.com/2019/01/26/knuI0O.jpg)

![assist](https://s2.ax1x.com/2019/01/26/knuhX6.jpg)

![assist](https://s2.ax1x.com/2019/01/26/knuHtH.jpg)

使用**迁移助理**可以一次性恢复所有文稿数据、应用以及系统设置，如果想要还原除系统以外的所有备份这个工具非常实用。

但是有个疑问，APPLE官网说使用迁移助理可以从按日期和时间排列的备份列表中选择恢复，但是尽管我的硬盘里已经有多个备份但是一直都只显示日期最近的一个，如果你知道怎么能切换版本麻烦告诉我一下方法。

#### 3、使用恢复功能完整恢复

最后一种方法就是前面重装时用到的恢复功能，选择第一项就是恢复备份的所有内容，包括文件、应用、系统以及各种设置，这个是可以选择恢复的备份版本的。

### 悬而未解

回到开始的问题，抹盘重装后经过测试，音视频播放不会崩溃了，我仍然不死心的觉得是系统的问题，通过**迁移助理**恢复所有的文件和应用后该死的问题又回来了。好吧，看来只可能是之前安装过的某个应用或者命令导致的，但是想要排查出来具体哪个宛如大海捞针，罢了，重新只恢复文稿，应用什么的抹掉慢慢安装吧。如果有人也遇到类似的问题并且找到了根源还望能够分享一下！