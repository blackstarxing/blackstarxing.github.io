<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="/img/favicon.ico" type="image/x-icon" />

    

    <!--Keywords-->
    
        <meta name="keywords" content="小程序" />
    

    <!--Description-->
    
        <meta name="description" content="这里是非典型程序员blackstar的博客，我将在这里分享有关前端技术、生活以及音乐方面的东西，欢迎各位同好和我一起交流心得">
    

    <!--Author-->
    
        <meta name="author" content="Jiaxing Yan">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="微信小程序那些你不知道的事儿"/>
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="这里是非典型程序员blackstar的博客，我将在这里分享有关前端技术、生活以及音乐方面的东西，欢迎各位同好和我一起交流心得" />
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Blackstar&#39;s Blog"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

        <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>微信小程序那些你不知道的事儿 - Blackstar&#39;s Blog</title>

    <!-- Bootstrap Core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Google Analytics -->
    


</head>


<body>

    <!-- Menu -->
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Don't rush and never settle.</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="/">
                            
                                Home
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives">
                            
                                Archives
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="https://github.com/blackstarxing">
                            
                                <i class="fa fa-github fa-stack-2x"></i>
                            
                        </a>
                    </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

    <!-- Main Content -->
    <!-- Page Header -->
<!-- Set your background image for this header in your post front-matter: cover -->

<header class="intro-header" style="background-image: url('https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1529827147060&di=9daf466807623fea081eaffa76c5dac6&imgtype=0&src=http%3A%2F%2Fpic1.win4000.com%2Fwallpaper%2F7%2F539fa0f4e65ad.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>微信小程序那些你不知道的事儿</h1>
                    
                    <span class="meta">
                        <!-- Date and Author -->
                        
                        2018-09-20
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <!-- Table of Contents -->
            

            <!-- Tags and categories -->
            
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    
                        


<a href="/tags/miniProgram/" class="article-tags">小程序</a>


                    
                </div>
                <!-- <div class="col-lg-4 col-md-5 post-categories"> -->
                    <!--  -->
                        <!-- 

<a href="/categories/technology/">技术</a>
 -->
                    <!--  -->
                <!-- </div> -->
            

            <!-- Gallery -->
            

            <!-- Post Main Content -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p>最近从零开始开发了一个微信小程序商城，一个月的时间下来也算颇有心得，于是想拿出来分享一下。本来想给文章标题起为“微信小程序奇技淫巧”，但是一查，奇技淫巧的意思是指过于奇巧，让人着迷，却又无益的技艺与制品。但咱们这可不是无意义瞎扯淡，不能这么叫，所以咱们就来聊聊小程序那些你知道或不知道的事儿，没准就能帮到困惑中的你。</p>
<h4 id="1、button边框样式修改"><a href="#1、button边框样式修改" class="headerlink" title="1、button边框样式修改"></a>1、button边框样式修改</h4><p>小程序的button组件可能是使用率最高的组件之一了，如果我们想要修改边框样式时直接修改button的css是没有效果的，需要这样：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">button</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">     <span class="attribute">border</span>:none;</span><br><span class="line">     <span class="attribute">border-radius</span>:<span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2、事件传参"><a href="#2、事件传参" class="headerlink" title="2、事件传参"></a>2、事件传参</h4><p>小程序中我们通常使用<code>bindtap</code>来绑定事件，但是绑定的方法并不能直接传参，我们需要借助标签的<code>data-*</code>属性，例如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">data-id</span>=<span class="string">"1"</span> <span class="attr">bindtap</span>=<span class="string">"openTab"</span>&gt;</span> Click me! <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>给<code>openTab</code>传递了一个<code>id=1</code>的参数，在方法函数内我们要取到这个参数也很简单</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">openTab(event) &#123;</span><br><span class="line">    <span class="comment">// 获取参数id</span></span><br><span class="line">    <span class="built_in">console</span>.log(event.currentTarget.dataset.id)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3、阻止冒泡"><a href="#3、阻止冒泡" class="headerlink" title="3、阻止冒泡"></a>3、阻止冒泡</h4><p>事件分为冒泡事件和非冒泡事件，当一个组件上的冒泡事件被触发后，该事件会向父节点传递，如不希望事件冒泡只需用<code>catch</code>替换掉<code>bind</code>即可，<code>bindtap</code>对应<code>catchtap</code>。</p>
<h4 id="4、改变数组值"><a href="#4、改变数组值" class="headerlink" title="4、改变数组值"></a>4、改变数组值</h4><p>修改静态的数组元素</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.setData(&#123;</span><br><span class="line">    <span class="string">'array[0].text'</span>:<span class="string">'changed data'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>如果索引的值是动态改变的需要使用这种写法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> item = <span class="string">'array['</span>+index+<span class="string">'].text'</span></span><br><span class="line"><span class="keyword">this</span>.setData(&#123;</span><br><span class="line">    [item]:<span class="string">'changed data'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="5、跳转到tabBar页面"><a href="#5、跳转到tabBar页面" class="headerlink" title="5、跳转到tabBar页面"></a>5、跳转到tabBar页面</h4><p>当要跳转到tabBar页面时，使用<code>wx.navigateTo</code>控制是无效的，这个时候需要使用<code>wx.switchTab</code>方法，并且<code>url</code>不可以有参数。</p>
<h4 id="6、用户拒绝授权后重新发起授权"><a href="#6、用户拒绝授权后重新发起授权" class="headerlink" title="6、用户拒绝授权后重新发起授权"></a>6、用户拒绝授权后重新发起授权</h4><p>由于小程序不再支持<code>wx.openSetting</code>方法，因此再度引导用户打开授权需要借助<code>button</code>组件的<code>open-type</code>    属性：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">open-type</span>=<span class="string">"openSetting"</span> <span class="attr">bindopensetting</span>=<span class="string">"handlerSetting"</span>&gt;</span>去授权<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>openSetting</code>打开授权页，<code>bindopensetting</code>用来绑定打开授权设置页后的回调方法。</p>
<h4 id="7、组件传值"><a href="#7、组件传值" class="headerlink" title="7、组件传值"></a>7、组件传值</h4><p>组件接受外部传入数据，但是需在<code>Component</code>构造器中定义<code>properties</code>才能使用，这点有点类似于<code>vue</code>的<code>props</code>。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">component</span> <span class="attr">param-a</span>=<span class="string">"1"</span> <span class="attr">param-b</span>=<span class="string">"hello"</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Component(&#123;</span><br><span class="line">    properties: &#123;</span><br><span class="line">        <span class="comment">//注意这里需要使用驼峰写法</span></span><br><span class="line">        paramA: <span class="built_in">Number</span>,</span><br><span class="line">        paramB: <span class="built_in">String</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="8、调用组件方法"><a href="#8、调用组件方法" class="headerlink" title="8、调用组件方法"></a>8、调用组件方法</h4><p>需要借助id选择器选择组件实例节点，调用组件方法</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">component</span> <span class="attr">id</span>=<span class="string">"nav"</span> <span class="attr">param-a</span>=<span class="string">"1"</span> <span class="attr">param-b</span>=<span class="string">"hello"</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.selectComponent(<span class="string">"#nav"</span>).getList()</span><br></pre></td></tr></table></figure>
<h4 id="9、获取页面路径及参数"><a href="#9、获取页面路径及参数" class="headerlink" title="9、获取页面路径及参数"></a>9、获取页面路径及参数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取页面路径</span></span><br><span class="line"><span class="keyword">this</span>.route</span><br><span class="line"><span class="comment">// 获取参数</span></span><br><span class="line"><span class="keyword">this</span>.options</span><br></pre></td></tr></table></figure>
<h4 id="10、禁止页面上下拉出空白"><a href="#10、禁止页面上下拉出空白" class="headerlink" title="10、禁止页面上下拉出空白"></a>10、禁止页面上下拉出空白</h4><p>在ios手机上上下滑动页面会被拉出一块空白区域，如果不想要这种效果可以在json文件中配置<code>&quot;disableScroll&quot;:true</code>，但如果设置了这个配置会导致下拉刷新方法<code>onPullDownRefresh</code>失效。</p>
<h4 id="11、阻止遮罩层滑动穿透"><a href="#11、阻止遮罩层滑动穿透" class="headerlink" title="11、阻止遮罩层滑动穿透"></a>11、阻止遮罩层滑动穿透</h4><p>遮罩层也是使用频率比较高的组件，但遮罩层很容易产生滑动穿透的问题，即当我们触摸滑动遮罩层的时候，遮罩层下面的页面也会跟着滑动，如何来解决这个问题，我们来分几种情况讨论：</p>
<p>（1）底层页面不需要下拉刷新，那只要像上一小节所讲设置<code>&quot;disableScroll&quot;:true</code>就好了。</p>
<p>（2）底层页面需要使用下拉刷新，遮罩层上无滚动，那么添加一个<code>catchtouchmove</code>事件:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"mask"</span> <span class="attr">catchtouchmove</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这样就阻止了触摸滑动及事件冒泡，达到阻止滑动穿透的效果。</p>
<p>（3）底层页面需要使用下拉刷新，遮罩层上有可滚动的区域，那么可以在遮罩层显示的时候动态的给下面的页面添加一个<code>class</code>使其定位固定不可滑动，样式可以是这样：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.fix</span>&#123;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="12、手风琴菜单"><a href="#12、手风琴菜单" class="headerlink" title="12、手风琴菜单"></a>12、手风琴菜单</h4><p>想实现一个手风琴下拉菜单动效？其实很简单，只需动态设置子菜单的高度结合<code>transition</code>过渡效果就可以实现了。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"sub-nav"</span> <span class="attr">style</span>=<span class="string">"&#123;&#123;active?style:'height:0;transition:height 0.5s;'&#125;&#125;"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> style = <span class="string">'height:'</span>+subNav.length*<span class="number">50</span>+<span class="string">'rpx;transition:height 0.5s;'</span></span><br></pre></td></tr></table></figure>
<h4 id="13、封装request请求"><a href="#13、封装request请求" class="headerlink" title="13、封装request请求"></a>13、封装request请求</h4><p>小程序提供的<code>request</code>请求API在项目中使用时如果不二次封装一下总觉得有些繁重，看过了网上几个不同的封装方式总觉得有些不满意，于是反复改动了几次得到了一个自己觉得用起来比较方便的版本，在这里分享出来。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// request.js</span></span><br><span class="line"><span class="comment">// GET请求</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GET</span>(<span class="params">url,data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> request(<span class="string">'GET'</span>,url,data)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// POST请求</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">POST</span>(<span class="params">url,data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> request(<span class="string">'POST'</span>,url,data)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params">method,url,data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> token = wx.getStorageSync(<span class="string">'tokenInfo'</span>) || <span class="string">''</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        wx.request(&#123;</span><br><span class="line">            url: url,</span><br><span class="line">            data: data,</span><br><span class="line">            method: method, <span class="comment">// OPTIONS, GET, HEAD, POST, PUT, DELETE, TRACE, CONNECT</span></span><br><span class="line">            <span class="comment">// 设置请求的 header</span></span><br><span class="line">            header: &#123;</span><br><span class="line">                Authorization: <span class="string">`<span class="subst">$&#123;token.token_type&#125;</span> <span class="subst">$&#123;token.access_token&#125;</span>`</span></span><br><span class="line">            &#125;,</span><br><span class="line">            success: <span class="function"><span class="params">res</span>=&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(res.data)&#123;</span><br><span class="line">                    resolve(res)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    reject(res)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            fail: <span class="function"><span class="params">()</span>=&gt;</span> &#123;</span><br><span class="line">                wx.showToast(&#123;</span><br><span class="line">                    title: <span class="string">'网络错误，请检查后重试'</span>,</span><br><span class="line">                    icon: <span class="string">'none'</span>,</span><br><span class="line">                    duration: <span class="number">2000</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    GET: GET,</span><br><span class="line">    POST: POST</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//app.js</span></span><br><span class="line"><span class="keyword">const</span> request = <span class="built_in">require</span>(<span class="string">"/utils/request.js"</span>)</span><br><span class="line">App(&#123;</span><br><span class="line">    <span class="comment">// 全局声明https请求方法</span></span><br><span class="line">    http:request</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取应用实例</span></span><br><span class="line"><span class="keyword">const</span> app = getApp()</span><br><span class="line">Page(&#123;</span><br><span class="line">    data: &#123;</span><br><span class="line">        code: <span class="string">''</span></span><br><span class="line">    &#125;,</span><br><span class="line">    onLoad() &#123;</span><br><span class="line">        app.http.GET(<span class="string">'https://...'</span>,&#123;<span class="attr">name</span>:<span class="string">''</span>,<span class="attr">pwd</span>:<span class="string">''</span>&#125;).then(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="comment">// 成功</span></span><br><span class="line">        &#125;).catch(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="comment">// 异常</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="14、日期转换"><a href="#14、日期转换" class="headerlink" title="14、日期转换"></a>14、日期转换</h4><p>IOS系统中<code>new Date()</code>方法不支持对’2018-04-12 23:00:00’这样的日期进行转换，需要对字符串进行正则替换<code>replace(/-/g, &#39;/&#39;)</code>。</p>
<h4 id="15、“分享监听”能力调整"><a href="#15、“分享监听”能力调整" class="headerlink" title="15、“分享监听”能力调整"></a>15、“分享监听”能力调整</h4><p>出于倡导用户主动分享小程序的考虑，微信官方不再支持<code>onShareAppMessage</code>分享事件函数的回调参数：<code>success</code>、<code>fail</code>、<code>complete</code>，因此开发者以后将无法通过这几个回调来获取用户的分享结果，如果需求有涉及请尽快调整，以免受到影响。</p>
<h4 id="16、getWXACodeUnlimit获取小程序码报错"><a href="#16、getWXACodeUnlimit获取小程序码报错" class="headerlink" title="16、getWXACodeUnlimit获取小程序码报错"></a>16、getWXACodeUnlimit获取小程序码报错</h4><p>使用<code>getWXACodeUnlimit</code>接口获取小程序码时，要注意<code>scene</code>参数最多接收32个字符，超出会报错。</p>
<h4 id="17、自定义顶部导航栏"><a href="#17、自定义顶部导航栏" class="headerlink" title="17、自定义顶部导航栏"></a>17、自定义顶部导航栏</h4><p>可在<code>app.json</code>的<code>window</code>属性下通过<code>&quot;navigationStyle&quot;:&quot;custom&quot;</code>自定义导航栏。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">"window":&#123;</span><br><span class="line">    "backgroundTextStyle":"dark",</span><br><span class="line">    "navigationBarBackgroundColor": "#3996F2",</span><br><span class="line">    "navigationBarTitleText": "物恋便利",</span><br><span class="line">    "navigationBarTextStyle":"white",</span><br><span class="line">    "navigationStyle":"custom"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>实际上就是去除了默认的导航栏但是会保留右上角胶囊按钮，标题什么的也没有了，需要开发者自己编写顶部导航。</p>


                
            </div>

            <!-- Comments -->
            
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    

 
  <section id="comments">
   <!-- 多说评论框 start -->
<div id="ds-thread" class="ds-thread" data-thread-key="2018-09-20-something-about-miniProgram.html" data-title="微信小程序那些你不知道的事儿" data-url="https://blackstarxing.github.io/2018-09-20-something-about-miniProgram.html"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"blackstar"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- 多说公共JS代码 end -->
  </section>
  
                </div>
            
        </div>
    </div>
</article>
	
	<!-- Back to Top -->
    <div class="backTop">
	<i class="fa fa-arrow-up"></i>
</div>

    <!-- Footer -->
    <hr />

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
    

    

    
        <li>
            <a href="https://github.com/blackstarxing" target="_blank">
                <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                </span>
            </a>
        </li>
    

    
        <li>
            <a href="http://weibo.com/2959895465/profile?topnav=1&wvr=6&is_all=1" target="_blank">
                <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                </span>
            </a>
        </li>
    

    

    

    
</ul>
                <p class="copyright text-muted">Original Theme <a target="_blank" href="http://startbootstrap.com/template-overviews/clean-blog/">Clean Blog</a> from <a href="http://startbootstrap.com/" target="_blank">Start Bootstrap</a></p>
                <p class="copyright text-muted">Adapted for <a target="_blank" href="https://hexo.io/">Hexo</a> by <a href="https://github.com/blackstarxing" target="_blank">Jiaxing Yan</a></p>
            </div>
        </div>
    </div>
</footer>


    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Bootstrap -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

<!-- Back to Top -->
<script type="text/javascript">
    $(document).ready(function(){
        $(".backTop").click(function(){
            $("html,body").animate({scrollTop:0},'slow');
        });
        var h = $(window).height();
        if($(window).scrollTop()>h){
            $(".backTop").show()
        }
        $(window).scroll(function(){
            if($(window).scrollTop()>h){
                $(".backTop").fadeIn();
            }else{
                $(".backTop").fadeOut();
            }
        })
    });
</script>

<!-- Disqus Comments -->



</body>

</html>